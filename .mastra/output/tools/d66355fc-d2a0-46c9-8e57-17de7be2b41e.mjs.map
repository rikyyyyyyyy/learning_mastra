{"version":3,"file":"d66355fc-d2a0-46c9-8e57-17de7be2b41e.mjs","sources":["../../../src/mastra/tools/job-result-tool.ts"],"sourcesContent":["import { createTool } from '@mastra/core/tools';\nimport { z } from 'zod';\nimport { getJobResult } from './job-status-tool';\n\nexport const jobResultTool = createTool({\n  id: 'job-result-fetch',\n  description: 'ジョブIDを指定してワークフロー実行結果を取得します。完了したジョブの詳細な結果データを取得できます。',\n  inputSchema: z.object({\n    jobId: z.string().describe('結果を取得したいジョブID'),\n  }),\n  outputSchema: z.object({\n    jobId: z.string(),\n    found: z.boolean(),\n    result: z.any().optional(),\n    completedAt: z.string().optional(),\n    workflowId: z.string().optional(),\n    message: z.string(),\n  }),\n  execute: async ({ context }) => {\n    const { jobId } = context;\n    \n    const jobResult = getJobResult(jobId);\n    \n    if (!jobResult) {\n      return {\n        jobId,\n        found: false,\n        message: `ジョブID「${jobId}」の結果は見つかりませんでした。ジョブが完了していないか、存在しない可能性があります。`,\n      };\n    }\n    \n    return {\n      jobId,\n      found: true,\n      result: jobResult.result,\n      completedAt: jobResult.completedAt.toISOString(),\n      workflowId: jobResult.workflowId,\n      message: `ジョブID「${jobId}」の結果を正常に取得しました。`,\n    };\n  },\n}); "],"names":[],"mappings":";;;;;;AAIO,MAAM,gBAAgB,UAAA,CAAW;AAAA,EACtC,EAAA,EAAI,kBAAA;AAAA,EACJ,WAAA,EAAa,0SAAA;AAAA,EACb,WAAA,EAAa,EAAE,MAAA,CAAO;AAAA,IACpB,KAAA,EAAO,CAAA,CAAE,MAAA,EAAO,CAAE,SAAS,sEAAe;AAAA,GAC3C,CAAA;AAAA,EACD,YAAA,EAAc,EAAE,MAAA,CAAO;AAAA,IACrB,KAAA,EAAO,EAAE,MAAA,EAAO;AAAA,IAChB,KAAA,EAAO,EAAE,OAAA,EAAQ;AAAA,IACjB,MAAA,EAAQ,CAAA,CAAE,GAAA,EAAI,CAAE,QAAA,EAAS;AAAA,IACzB,WAAA,EAAa,CAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IACjC,UAAA,EAAY,CAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IAChC,OAAA,EAAS,EAAE,MAAA;AAAO,GACnB,CAAA;AAAA,EACD,OAAA,EAAS,OAAO,EAAE,OAAA,EAAQ,KAAM;AAC9B,IAAA,MAAM,EAAE,OAAM,GAAI,OAAA;AAElB,IAAA,MAAM,SAAA,GAAY,aAAa,KAAK,CAAA;AAEpC,IAAA,IAAI,CAAC,SAAA,EAAW;AACd,MAAA,OAAO;AAAA,QACL,KAAA;AAAA,QACA,KAAA,EAAO,KAAA;AAAA,QACP,OAAA,EAAS,6BAAS,KAAK,CAAA,kQAAA;AAAA,OACzB;AAAA,IACF;AAEA,IAAA,OAAO;AAAA,MACL,KAAA;AAAA,MACA,KAAA,EAAO,IAAA;AAAA,MACP,QAAQ,SAAA,CAAU,MAAA;AAAA,MAClB,WAAA,EAAa,SAAA,CAAU,WAAA,CAAY,WAAA,EAAY;AAAA,MAC/C,YAAY,SAAA,CAAU,UAAA;AAAA,MACtB,OAAA,EAAS,6BAAS,KAAK,CAAA,0FAAA;AAAA,KACzB;AAAA,EACF;AACF,CAAC;;;;"}